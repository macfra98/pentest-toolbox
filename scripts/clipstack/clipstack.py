#!/usr/bin/env python

########## IMPORTS ##########
import clipboard
import argparse
import sys
#############################

class Clipstack:
    def __init__(self, args):
        self.args = args

    def clipboard(self):
        full_data = ""

        if sys.stdin:
            for line in sys.stdin:
                processed_line = line.strip()
                full_data += processed_line

        clipboard.copy(full_data)

    def write(self):
        pass

    def copy(self):
        pass

    def selection(self):
        for arg_k, arg_v in self.args.items():
            if arg_v == 'clip':
                self.clipboard()
            elif arg_v == 'write':
                self.write()
            elif arg_v == 'copy':
                self.copy()
            else:
                print("[-] Unknown argument/flag.")

def parse_args():
    parser = argparse.ArgumentParser(
            prog='Clipstack',
            description='Clipstack can currently copy to clipboard, \
                    cp files, and write clipboard to files.',
            epilog='''
            Usage:\n
            e.g: cat text.txt | clipboard -s clip (copy to clipboard)
            e.g: cat text.txt | clipboard -s write (write clipboard to file in working dir)
            e.g: ../some/random/path | clipboard -s copy (copy file to working dir)
            ''' 
    )
    parser.add_argument('-s', '--selection',
                             required=True,
                             help="Selects between (clip), (write), and (copy)")
    args = vars(parser.parse_args()) 
    return args

def main(): args = parse_args()
    clipstack = Clipstack(args)
    clipstack.selection()

if __name__ == '__main__':
    main()
