import argparse
import os

class scanner:
    def __init__(self, options):
        self.parser = argparse.ArgumentParser(description="A simple argparse example")
        self.options = {}

    def arguments_parser(self):
        self.parser.add_argument("-v", "--verbose", help="increase output verbosity", action='store_true')
        self.parser.add_argument("-a", "--address", required=True, help="IP address to scan -> example: -a 192.168.1.1")
        self.parser.add_argument("-p", "--port", type=int, default=80, help="Port to scan -> example: -p 80")
        self.parser.add_argument("-p-", "--allports", help="Scan all ports -> example: -p-", action='store_true')
        return self.parser.parse_args()

    def store_arguments(self):
        args = self.arguments_parser()
        self.options = vars(args)
        return True
    
    def use_arguments(self):
        if "allports" in self.options:
            for port in range(254):
                os.system(f"ping {self.options['address']} -c 1")
        
if __name__ == '__main__':
    init_scanner = scanner(None)
    init_scanner.store_arguments()
    init_scanner.use_arguments()
